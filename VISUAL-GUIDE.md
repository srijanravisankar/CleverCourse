# ğŸ¨ AI Chat Panel - Visual Guide

## Layout Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Your App                             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚  Main Content Area     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        â”‚         â”‚  AI Assistant   â”‚   â”‚
â”‚  â”‚  - Courses             â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  - Articles            â”‚         â”‚  â”‚  Header   â”‚  â”‚   â”‚
â”‚  â”‚  - Study Materials     â”‚         â”‚  â”‚  â€¢ Clear  â”‚  â”‚   â”‚
â”‚  â”‚                        â”‚         â”‚  â”‚  â€¢ Close  â”‚  â”‚   â”‚
â”‚  â”‚  Select this text! â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚  [Ask AI popup appears]â”‚         â”‚                 â”‚   â”‚
â”‚  â”‚                        â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚                        â”‚         â”‚  â”‚ Messages  â”‚  â”‚   â”‚
â”‚  â”‚                        â”‚         â”‚  â”‚ (scroll)  â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                     â”‚                 â”‚   â”‚
â”‚                                     â”‚  [Context]      â”‚   â”‚
â”‚                           â”Œâ”€â”€â”     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚                           â”‚ğŸ¤–â”‚â—„â”€â”€â”€â”€â”‚  â”‚ Input     â”‚  â”‚   â”‚
â”‚                           â””â”€â”€â”˜     â”‚  â”‚ [Send]    â”‚  â”‚   â”‚
â”‚                       Floating     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                        Button      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         400px wide       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Components Breakdown

### 1. Chat Panel (Right Side)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ¨ AI Assistant  ğŸ—‘ï¸âŒâ”‚  â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ User Message    â”‚ â”‚  â† User bubble
â”‚ â”‚ 2:30 PM         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ AI Response     â”‚ â”‚  â† Assistant bubble
â”‚ â”‚ 2:30 PM         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â”‚
â”‚   [Auto-scrolls]    â”‚
â”‚                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Context Badge]  âŒ â”‚  â† Context display
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Type here...] [ğŸ“¤] â”‚  â† Input area
â”‚ Press Enter to send â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Floating Button

```
         â”Œâ”€â”€â”€â”€â”€â”€â”
         â”‚      â”‚
         â”‚  ğŸ’¬  â”‚  â† Click to open
         â”‚  3   â”‚  â† Unread badge
         â””â”€â”€â”€â”€â”€â”€â”˜
    Bottom-right corner
```

### 3. Selection Popover

```
    Select some text here
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ âœ¨ Ask AIâ”‚  â† Popup appears
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## User Flow Diagram

```
Start
  â”‚
  â”œâ”€â–º Method 1: Click Floating Button
  â”‚   â””â”€â–º Chat Panel Opens (empty)
  â”‚       â””â”€â–º Type question â†’ Get response
  â”‚
  â”œâ”€â–º Method 2: Select Text + Popover
  â”‚   â””â”€â–º Highlight text
  â”‚       â””â”€â–º Click "Ask AI"
  â”‚           â””â”€â–º Chat opens with context
  â”‚               â””â”€â–º Type question â†’ Get response
  â”‚
  â””â”€â–º Method 3: Keyboard Shortcut
      â””â”€â–º Highlight text
          â””â”€â–º Press Cmd+Shift+C
              â””â”€â–º Chat opens with context
                  â””â”€â–º Type question â†’ Get response

Continue conversation...
  â”‚
  â”œâ”€â–º Add more messages
  â”‚   â””â”€â–º Context maintained
  â”‚
  â”œâ”€â–º Clear chat (trash icon)
  â”‚   â””â”€â–º Start fresh
  â”‚
  â””â”€â–º Close (X or button)
      â””â”€â–º Chat closes (state saved)
```

## Message Types

### User Message (Right-aligned, Primary Color)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        [Context]   â”‚ Can you help   â”‚
        â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ me understand  â”‚
                    â”‚ this?          â”‚
                    â”‚ 2:30 PM        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Assistant Message (Left-aligned, Muted)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sure! Let me       â”‚
â”‚ explain...         â”‚
â”‚                    â”‚
â”‚ 2:30 PM            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Loading State

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ â€¢ â€¢       â”‚
â”‚ Thinking... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## States & Interactions

### Panel States

1. **Closed** (Default)
   - Only floating button visible
   - Badge shows unread count

2. **Opening** (Animation)
   - Slides in from right
   - Smooth transition

3. **Open - Empty**
   - Welcome message
   - Instructions displayed
   - Input ready

4. **Open - Active**
   - Messages displayed
   - Scrollable area
   - Input active

5. **Loading**
   - Animated dots
   - "Thinking..." message
   - Input disabled

### Button States

1. **Default** (Blue button, no badge)
2. **Has Messages** (Badge with count)
3. **Hover** (Scale up animation)
4. **Hidden** (When panel is open)

### Popover States

1. **Hidden** (Default, no selection)
2. **Visible** (Text selected > 3 chars)
3. **Hover** (Highlighted "Ask AI")

## Keyboard Shortcuts

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Action              â”‚ Shortcut             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Send message        â”‚ Enter                â”‚
â”‚ New line            â”‚ Shift + Enter        â”‚
â”‚ Ask about selection â”‚ Cmd/Ctrl + Shift + C â”‚
â”‚ (Potential) Close   â”‚ Esc                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Color Scheme

### User Message

- Background: `bg-primary`
- Text: `text-primary-foreground`
- Timestamp: `opacity-70`

### Assistant Message

- Background: `bg-muted`
- Text: `text-foreground`
- Timestamp: `text-muted-foreground`

### Context Badge

- Background: `bg-muted/50`
- Border: `border-dashed`
- Icon: `text-muted-foreground`

### Floating Button

- Background: `bg-primary`
- Shadow: `shadow-lg`
- Badge: `bg-destructive`

## Responsive Behavior

### Desktop (>768px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Content      â”‚   Chat      â”‚
â”‚              â”‚   Panel     â”‚
â”‚   Wide       â”‚   400px     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile (<768px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Content    â”‚  â† Full screen
â”‚              â”‚
â”‚  [Button]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

When opened:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Chat       â”‚  â† Overlay
â”‚   Full       â”‚
â”‚   Width      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Animation Timings

- **Panel Slide-in**: `300ms ease-out`
- **Button Hover**: `200ms`
- **Button Scale**: `scale-110`
- **Popover Fade**: `150ms`
- **Loading Dots**: `bounce` animation
- **Auto-scroll**: `smooth` behavior

## Accessibility Features

### Keyboard Navigation

- Tab through all interactive elements
- Enter to send, Escape to close
- Focus visible on all buttons

### Screen Readers

- Semantic HTML elements
- ARIA labels on icons
- Role attributes for chat messages
- Alt text for all images/icons

### Color Contrast

- WCAG AA compliant
- Dark mode support
- High contrast mode compatible

## Integration Points

```
layout.tsx (Root)
    â”‚
    â”œâ”€â–º ChatPanel (Main UI)
    â”‚   â”œâ”€â–º useChatStore (State)
    â”‚   â””â”€â–º sendChatMessage (API)
    â”‚
    â”œâ”€â–º ChatTrigger (Button)
    â”‚   â””â”€â–º useChatStore (State)
    â”‚
    â””â”€â–º SelectionPopover (Popup)
        â”œâ”€â–º useTextSelection (Hook)
        â””â”€â–º useChatStore (State)

All Pages Automatically Include:
âœ“ Chat functionality
âœ“ Text selection
âœ“ Floating button
```

## Data Flow

```
User Action
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI Component â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chat Store   â”‚ (Zustand)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chat API     â”‚ (Server Action)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gemini AI    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Response     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chat Store   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI Update    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Quick Reference Card

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        AI Chat Panel - Quick Reference        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                               â•‘
â•‘  ğŸ¯ Opening Chat:                            â•‘
â•‘    â€¢ Click floating button (bottom-right)    â•‘
â•‘    â€¢ Select text â†’ Click "Ask AI"            â•‘
â•‘    â€¢ Cmd/Ctrl+Shift+C with selected text    â•‘
â•‘                                               â•‘
â•‘  ğŸ’¬ Sending Messages:                        â•‘
â•‘    â€¢ Type in input field                     â•‘
â•‘    â€¢ Press Enter to send                     â•‘
â•‘    â€¢ Shift+Enter for new line                â•‘
â•‘                                               â•‘
â•‘  ğŸ” Using Context:                           â•‘
â•‘    â€¢ Highlight any text on page              â•‘
â•‘    â€¢ Opens chat with context badge           â•‘
â•‘    â€¢ Ask questions about the text            â•‘
â•‘                                               â•‘
â•‘  ğŸ—‘ï¸  Managing Chat:                          â•‘
â•‘    â€¢ Trash icon: Clear all messages          â•‘
â•‘    â€¢ X icon: Close panel                     â•‘
â•‘    â€¢ Click button again: Toggle              â•‘
â•‘                                               â•‘
â•‘  âš™ï¸  Setup Required:                         â•‘
â•‘    â€¢ Add GEMINI_API_KEY to .env.local        â•‘
â•‘    â€¢ Get key from: ai.google.dev             â•‘
â•‘                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

**Ready to use!** Just start the dev server and try it out! ğŸš€
